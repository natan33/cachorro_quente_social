import{$ as t}from"./bootstrap.bundle.min-CP0kyYqZ.js";/* empty css                      */import{S as u}from"./sweetalert2.esm.all-BQIkj5Wb.js";function c({icon:o="info",title:l="",text:a="",timer:e=null}){return u.fire({icon:o,title:l,text:a,timer:e,timerProgressBar:!!e,showConfirmButton:!e})}t(document).ready(function(){const o=t("#saleForm");o.closest(".modal").attr("id");const a={id:1,price:5};function e(){let s=parseInt(t("#quantity").val())||1,n=a.price*s;t("#totalAmount").text(`R$ ${n.toFixed(2)}`)}t("#quantity").on("input change",e),t("#saleForm").on("submit",function(s){s.preventDefault();const n=parseInt(t("#quantity").val());if(n<=0){c({icon:"warning",title:"Quantidade inválida",text:"Quantidade deve ser maior que zero."});return}const i=t("#buyerName").val().trim();if(i&&!isNaN(i)){c({icon:"error",title:"Nome inválido",text:"O nome do comprador não pode ser um número."});return}const d=t("#paymentMethod").val(),m=t('input[name="payment_status"]:checked').val(),p={items:[{product_id:a.id,quantity:n}],buyerName:i,payment_method:d,payment_status:m,notes:t("#notes").val()};t.ajax({url:"/sell",method:"POST",contentType:"application/json",data:JSON.stringify(p),success:function(r){r.success&&(o[0].reset(),t("#salesTable").DataTable().ajax.reload(),t("#fechar-modal-add-venda").trigger("click"),u.fire({title:"Pedido enviado com sucesso!",icon:"success",timer:1e3,showConfirmButton:!1}),setTimeout(()=>{u.close()},1600))},error:function(r){const f=r.responseJSON?r.responseJSON.message:"Erro desconhecido.";c({icon:"error",title:"Erro ao registrar venda",text:f})}})}),e()});
